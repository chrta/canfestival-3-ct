export PREFIX := /usr/local/ecos/2138_install
export COMMAND_PREFIX := arm-elf-
export CC := $(COMMAND_PREFIX)gcc
export OBJCOPY := $(COMMAND_PREFIX)objcopy

ECOS_GLOBAL_CFLAGS=-mcpu=arm7tdmi -Wall -Wpointer-arith -Wstrict-prototypes -Winline -Wundef -Os -ffunction-sections -fdata-sections -fno-exceptions -finline-functions
ECOS_GLOBAL_LDFLAGS=-mcpu=arm7tdmi -Wl,--gc-sections -Wl,-static -nostdlib

all: 

lpc2138.o  : lpc2138.c  lpc2138.h types.h
s1d13706.o : s1d13706.c lpc2138.h types.h
sja1000.o  : sja1000.c  lpc2138.h types.h

.c.o:
	$(CC) -g -c $(ECOS_GLOBAL_CFLAGS) -I$(PREFIX)/include -I$(PREFIX)/lib/driver $*.c

clean:
	rm -f *.hex *.elf *.o *~
